(function(a){a.fn.lightBox=function(k){k=jQuery.extend({overlayBgColor:"#03458a",overlayOpacity:0.4,fixedNavigation:false,imageLoading:"content/scripts/lightbox/images/lightbox-ico-loading.gif",imageBtnPrev:"content/scripts/lightbox/images/lightbox-btn-prev.gif",imageBtnNext:"content/scripts/lightbox/images/lightbox-btn-next.gif",imageBtnClose:"content/scripts/lightbox/images/lightbox-btn-close.gif",imageBlank:"content/scripts/lightbox/images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},k);var b=this;function q(){h(this,b);return false}function h(u,t){a("embed, object, select").css({visibility:"hidden"});s();k.imageArray.length=0;k.activeImage=0;if(t.length==1){k.imageArray.push(new Array(u.getAttribute("href"),u.getAttribute("title")))}else{for(var v=0;v<t.length;v++){k.imageArray.push(new Array(t[v].getAttribute("href"),t[v].getAttribute("title")))}}while(k.imageArray[k.activeImage][0]!=u.getAttribute("href")){k.activeImage++}g()}function s(){a("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav-btnPrev-div"><a href="#" id="lightbox-nav-btnPrev" ></a></div><div style="" id="lightbox-nav-btnNext-div"><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+k.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+k.imageBtnClose+'"></a></div></div></div></div>');var u=c();a("#jquery-overlay").css({backgroundColor:k.overlayBgColor,opacity:k.overlayOpacity,width:u[0],height:u[1]}).fadeIn();var t=l();a("#jquery-lightbox").css({top:t[1]+(u[3]/10),left:t[0]}).show();a("#jquery-overlay,#jquery-lightbox").click(function(){p()});a("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){p();return false});a(window).resize(function(){var w=c();a("#jquery-overlay").css({width:w[0],height:w[1]});var v=l();a("#jquery-lightbox").css({top:v[1]+(w[3]/10),left:v[0]})})}function g(){a("#lightbox-loading").show();if(k.fixedNavigation){a("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}else{a("#lightbox-image,#lightbox-nav-btnPrev-div,#lightbox-nav-btnNext-div,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}var t=new Image();t.onload=function(){a("#lightbox-image").attr("src",k.imageArray[k.activeImage][0]);r(t.width,t.height);t.onload=function(){}};t.src=k.imageArray[k.activeImage][0]}function r(v,y){var A=a("#lightbox-container-image-box").width();var w=a("#lightbox-container-image-box").height();var u=(v+(k.containerBorderSize*2));var z=(y+(k.containerBorderSize*2));var x=A-u;var t=w-z;a("#lightbox-container-image-box").animate({width:u,height:z},k.containerResizeSpeed,function(){e()});if((x==0)&&(t==0)){if(a.browser.msie){o(250)}else{o(100)}}a("#lightbox-container-image-data-box").css({width:v});a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:"50px"})}function e(){a("#lightbox-loading").hide();a("#lightbox-image").fadeIn(function(){d();f()});m()}function d(){a("#lightbox-container-image-data-box").slideDown("fast");a("#lightbox-image-details-caption").hide();if(k.imageArray[k.activeImage][1]){a("#lightbox-image-details-caption").html(k.imageArray[k.activeImage][1]).show()}if(k.imageArray.length>1){a("#lightbox-image-details-currentNumber").html(k.txtImage+" "+(k.activeImage+1)+" "+k.txtOf+" "+k.imageArray.length).show()}}function f(){a("#lightbox-nav-btnNext-div").show();a("#lightbox-nav-btnPrev-div").show();a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+k.imageBlank+") no-repeat"});if(k.activeImage!=0){if(k.fixedNavigation){a("#lightbox-nav-btnPrev").css({background:"url("+k.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){k.activeImage=k.activeImage-1;g();return false})}else{a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+k.imageBtnPrev+") left 15% no-repeat"})},function(){a(this).css({background:"transparent url("+k.imageBlank+") no-repeat"})}).show().bind("click",function(){k.activeImage=k.activeImage-1;g();return false})}}if(k.activeImage!=(k.imageArray.length-1)){if(k.fixedNavigation){a("#lightbox-nav-btnNext").css({background:"url("+k.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){k.activeImage=k.activeImage+1;g();return false})}else{a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+k.imageBtnNext+") right 15% no-repeat"})},function(){a(this).css({background:"transparent url("+k.imageBlank+") no-repeat"})}).show().bind("click",function(){k.activeImage=k.activeImage+1;g();return false})}}n()}function n(){a(document).keydown(function(t){j(t)})}function i(){a(document).unbind()}function j(t){if(t==null){keycode=event.keyCode;escapeKey=27}else{keycode=t.keyCode;escapeKey=t.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if((key==k.keyToClose)||(key=="x")||(keycode==escapeKey)){p()}if((key==k.keyToPrev)||(keycode==37)){if(k.activeImage!=0){k.activeImage=k.activeImage-1;g();i()}}if((key==k.keyToNext)||(keycode==39)){if(k.activeImage!=(k.imageArray.length-1)){k.activeImage=k.activeImage+1;g();i()}}}function m(){if((k.imageArray.length-1)>k.activeImage){objNext=new Image();objNext.src=k.imageArray[k.activeImage+1][0]}if(k.activeImage>0){objPrev=new Image();objPrev.src=k.imageArray[k.activeImage-1][0]}}function p(){a("#jquery-lightbox").remove();a("#jquery-overlay").fadeOut(function(){a("#jquery-overlay").remove()});a("embed, object, select").css({visibility:"visible"})}function c(){var w,t;if(window.innerHeight&&window.scrollMaxY){w=window.innerWidth+window.scrollMaxX;t=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){w=document.body.scrollWidth;t=document.body.scrollHeight}else{w=document.body.offsetWidth;t=document.body.offsetHeight}}var v,u;if(self.innerHeight){if(document.documentElement.clientWidth){v=document.documentElement.clientWidth}else{v=self.innerWidth}u=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){v=document.documentElement.clientWidth;u=document.documentElement.clientHeight}else{if(document.body){v=document.body.clientWidth;u=document.body.clientHeight}}}if(t<u){pageHeight=u}else{pageHeight=t}if(w<v){pageWidth=w}else{pageWidth=v}arrayPageSize=new Array(pageWidth,pageHeight,v,u);return arrayPageSize}function l(){var u,t;if(self.pageYOffset){t=self.pageYOffset;u=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){t=document.documentElement.scrollTop;u=document.documentElement.scrollLeft}else{if(document.body){t=document.body.scrollTop;u=document.body.scrollLeft}}}arrayPageScroll=new Array(u,t);return arrayPageScroll}function o(v){var t=new Date();u=null;do{var u=new Date()}while(u-t<v)}return this.unbind("click").click(q)}})(jQuery);